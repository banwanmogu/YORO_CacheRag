# ğŸ§ YORO â€”â€”you only rag onceâ€”â€” LRUç¼“å­˜ â€”â€” é¢å¯¹ç°å®åœºæ™¯é‡å¤é—®é¢˜ï¼Œä»…éœ€ragä¸€æ¬¡ï¼â€”â€”åŠ¨æ€ç¼“å­˜æ›¿æ¢ç®—æ³•

[ğŸ‡¨ğŸ‡³ ä¸­æ–‡](README.md) | [ğŸ‡ºğŸ‡¸ English](README_ENG.md)

![alt text](image-1.png)

## ä¸ºä»€ä¹ˆä½¿ç”¨YOROï¼Ÿ
# ç¼“å­˜
åœ¨ä¼ä¸šçº§çœŸå®åœºæ™¯ä¸­ï¼Œä¾‹å¦‚å®¢æœæœºå™¨äººï¼Œæ–‡æ¡£è§£é‡ŠåŠ©æ‰‹ï¼Œç”¨æˆ·éœ€è¦çš„ä¿¡æ¯ å¾€å¾€éƒ½åœ¨åŒä¸€ä¸ªæ®µè½ä¸­ã€‚

æ™®é€šragä¾‹ï¼š
Q1ï¼šYOROä½œè€…moguä»Šå¹´å¤šå°‘å²ï¼Ÿ   æ¨¡å‹é€‰æ‹©è°ƒç”¨ragï¼ŒæŸ¥è¯¢åˆ° moguä»Šå¹´23å²ã€‚
Q2ï¼šYOROä½œè€…moguç›®å‰å±…ä½åœ¨å“ªï¼Ÿ  æ¨¡å‹é€‰æ‹©è°ƒç”¨ragï¼ŒæŸ¥è¯¢åˆ°moguç›®å‰å±…ä½åœ¨æ—¥æœ¬ã€‚
Q3ï¼šYOROä½œè€…moguæ˜¯ç¨‹åºå‘˜å—ï¼Ÿ    æ¨¡å‹é€‰æ‹©è°ƒç”¨ragï¼ŒæŸ¥è¯¢åˆ°moguæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ã€‚
....

éå¸¸ä½æ•ˆï¼å¯ä»¥çœ‹åˆ°æ¨¡å‹è°ƒç”¨äº†å¤šæ¬¡ragï¼Œæ¯æ¬¡éƒ½è¦å¯¹å‘é‡æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ã€‚ä½†æ˜¯ä¿¡æ¯éƒ½åœ¨ragæ–‡æ¡£ä¸­çš„ä¸€å¥è¯ä¸­ï¼š
YOROä½œè€…moguæ˜¯ä¸€ä¸ªç›®å‰å±…ä½åœ¨æ—¥æœ¬çš„23å²ç¨‹åºå‘˜ã€‚


YOROä¾‹ï¼š
Q1ï¼šYOROä½œè€…moguä»Šå¹´å¤šå°‘å²ï¼Ÿ   æ¨¡å‹é€‰æ‹©è°ƒç”¨ragï¼ŒæŸ¥è¯¢åˆ° moguä»Šå¹´23å²ã€‚å¹¶å°†ã€YOROä½œè€…moguæ˜¯ä¸€ä¸ªç›®å‰å±…ä½åœ¨æ—¥æœ¬çš„23å²ç¨‹åºå‘˜ã€‚ã€‘çš„å‘é‡åŒ–ä¿¡æ¯å­˜è´®åˆ°ç¼“å­˜ä¸­ã€‚
Q2ï¼šYOROä½œè€…moguç›®å‰å±…ä½åœ¨å“ªï¼Ÿ  æ¨¡å‹æŸ¥è¯¢ç¼“å­˜ hitï¼ ç›´æ¥è¿”å›moguç›®å‰åœ¨æ—¥æœ¬ã€‚
Q3ï¼šYOROä½œè€…moguæ˜¯ç¨‹åºå‘˜å—ï¼Ÿ    æ¨¡å‹æŸ¥è¯¢ç¼“å­˜ hitï¼ ç›´æ¥è¿”å›moguæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ã€‚

é«˜æ•ˆé¢å¯¹çœŸå®çš„ragåœºæ™¯ï¼

# LRUæ›¿æ¢ç®—æ³•
YOROå®ç°äº†LRUæ›¿æ¢ç®—æ³•ï¼ç±»ä¼¼è®¡ç®—æœºå†…å­˜çš„æ›¿æ¢ç®—æ³•ï¼Œé«˜æ•ˆä¸”ç¬¦åˆå®é™…åœºæ™¯ä½¿ç”¨

å½“è¯¢é—®çš„é—®é¢˜å¾€å¾€ä¸åœ¨ç¼“å­˜ä¸­æ—¶ï¼Œç¼“å­˜ä¼šä¼˜å…ˆæ·˜æ±°æœ€è¿‘æ²¡æœ‰ä½¿ç”¨çš„å—ï¼

æ¯ä¸ªç¼“å­˜å—è®¾è®¡äº†ä¸€ä¸ªã€å­˜åœ¨ä½ã€‘ï¼Œå½“ç¼“å­˜è°ƒå‡ºçš„æ—¶å€™è®¾ç½®ä¸º0ï¼Œç±»ä¼¼è®¡ç®—æœºå†…å­˜çš„ã€æ— éœ€é‡å†™ã€‘


> ğŸš€ YOROæ˜¯åŸºäº**LangChain** çš„é¡¹ç›®ï¼Œé›†æˆäº†**åŠ¨æ€ç‰¹å¾æ„ŸçŸ¥çš„ LRU ç¼“å­˜**ã€å’Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰â€”â€” ä¼˜åŒ–**é«˜æ•ˆè¯­ä¹‰å¤ç”¨**ã€‚

![Python](https://img.shields.io/badge/Python-3.10%2B-blue.svg?logo=python)
![LangChain](https://img.shields.io/badge/LangChain-âœ…-green?logo=chainlink)
![OpenAI](https://img.shields.io/badge/OpenAI-Embeddings-purple?logo=openai)
![License](https://img.shields.io/badge/license-MIT-orange)
![Status](https://img.shields.io/badge/status-Active-brightgreen)

---

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

âœ… **RAG **
- ä½¿ç”¨ `InMemoryVectorStore` è¿›è¡Œè¯­ä¹‰æ£€ç´¢
- ä½¿ç”¨ `RecursiveCharacterTextSplitter` åµŒå…¥å’Œåˆ†å‰²å¤§å‹æ–‡æ¡£

âœ… **è‡ªå®šä¹‰è¯­ä¹‰ç¼“å­˜**
- LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰+ åŸºäºä½™å¼¦ç›¸ä¼¼åº¦çš„ç¼“å­˜
- æ™ºèƒ½ç¼“å­˜å‘½ä¸­æ£€æµ‹ï¼ˆå¯è°ƒèŠ‚ `threshold`ï¼‰
- å‡å°‘é‡å¤çš„åµŒå…¥å’Œæ£€ç´¢æˆæœ¬

âœ… **LangGraph é›†æˆ**
- ä½¿ç”¨ `InMemorySaver` è¿›è¡Œå†…å­˜æ£€æŸ¥ç‚¹
- æ”¯æŒå¸¦æœ‰æŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„*å¤šè½®*å¯¹è¯

---

## ğŸ§© ç³»ç»Ÿæ¶æ„

TODO

## ğŸ§± é¡¹ç›®ç»“æ„

```plaintext
.
â”œâ”€â”€ ğŸš€ main.py                # å…¥å£ç‚¹ï¼ˆæ™ºèƒ½ä½“å¾ªç¯ï¼‰
â”œâ”€â”€ ğŸ“ .env                   # ç¯å¢ƒå˜é‡ï¼ˆOPENAI_API_KEYï¼‰
â”œâ”€â”€ ğŸ“¦ requirements.txt       # ä¾èµ–é¡¹
â”œâ”€â”€ ğŸ“– README.md             # æ–‡æ¡£è¯´æ˜
â””â”€â”€ ğŸ“‚ utils/
    â”œâ”€â”€ ğŸ§  semantic_cache.py  # è‡ªå®šä¹‰ LRU + åµŒå…¥ç¼“å­˜
    â””â”€â”€ ğŸ”„ loaders.py        # WebåŸºç¡€åŠ è½½å™¨
```

## âš™ï¸ å®‰è£…æ­¥éª¤

```bash
# 1ï¸âƒ£ å…‹éš†ä»“åº“
git clone https://github.com/yourusername/langgraph-rag-agent.git
cd langgraph-rag-agent

# 2ï¸âƒ£ åˆ›å»ºç¯å¢ƒ
python -m venv venv
# Windows:
venv\Scripts\activate
# Linux/Mac:
# source venv/bin/activate

# 3ï¸âƒ£ å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4ï¸âƒ£ è®¾ç½®ç¯å¢ƒå˜é‡
# åˆ›å»º .env æ–‡ä»¶å¹¶æ·»åŠ æ‚¨çš„ OpenAI API å¯†é’¥
echo "OPENAI_API_KEY=sk-xxxxxx" > .env
```

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æè¿° |
|------|------|
| `SemanticCache` | åŸºäºåµŒå…¥ä½™å¼¦ç›¸ä¼¼åº¦çš„ LRU ç¼“å­˜ |
| `InMemoryVectorStore` | å­˜å‚¨åˆ†å‰²æ–‡æ¡£çš„å‘é‡æ•°æ®åº“ |
| `WebBaseLoader` | ç”¨äºæ£€ç´¢çš„ç½‘é¡µå†…å®¹çˆ¬å–å™¨ |
| `RecursiveCharacterTextSplitter` | å°†é•¿æ–‡æ¡£åˆ†å‰²ä¸ºè¯­ä¹‰å— |
| `ResponseFormat` | å¼ºåˆ¶å®æ–½ç»“æ„åŒ– LLM è¾“å‡ºçš„æ•°æ®ç±» |
| `InMemorySaver` | ç”¨äºå¯¹è¯çº¿ç¨‹çš„ LangGraph å†…å­˜æ£€æŸ¥ç‚¹ |

## ğŸ§© è¯­ä¹‰ç¼“å­˜ç¤ºä¾‹

```python
cache.stats()
# {'capacity': 128, 'entries': 7, 'threshold': 0.3}

# ç¼“å­˜å‘½ä¸­æ—¶ï¼š
[Cache] HIT (score=0.91) for query: "LangChain memory"...
```

## ğŸ§° ä¾èµ–é¡¹

| åº“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|--------|---------|
| `langchain` | æœ€æ–°ç‰ˆ | æ™ºèƒ½ä½“å’Œå·¥å…·ç¼–æ’ |
| `langgraph` | æœ€æ–°ç‰ˆ | åŸºäºå›¾çš„æ™ºèƒ½ä½“æ‰§è¡Œ |
| `langchain_openai` | æœ€æ–°ç‰ˆ | åµŒå…¥å’ŒèŠå¤©æ¨¡å‹ |
| `numpy` | â‰¥1.25 | å‘é‡æ•°å­¦è®¡ç®— |
| `beautifulsoup4` | â‰¥4.12 | ç½‘é¡µè§£æ |
| `dotenv` | â‰¥1.0 | ç¯å¢ƒå˜é‡åŠ è½½ |

## ğŸ“¸ é¢„è§ˆ
![alt text](image.png)
